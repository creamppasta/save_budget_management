<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .container { max-width: 1100px; margin-top: 50px; }
        .table-box { background-color: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }

        /* í…Œì´ë¸” ë ˆì´ì•„ì›ƒ êµì • */
        .table { table-layout: fixed; width: 100%; }
        th, td {
            vertical-align: middle !important;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .search-area { background-color: #fff; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #dee2e6; }
        .btn-header { margin-bottom: 15px; }
    </style>
    <title>íšŒë¹„ ë‚©ë¶€ ë‚´ì—­</title>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>ğŸ’° íšŒë¹„ ë‚©ë¶€ ë‚´ì—­</h2>
    </div>

    <div class="search-area shadow-sm">
        <form th:action="@{/dues}" method="get" class="form-row align-items-end justify-content-center">
            <div class="col-md-3">
                <label class="small font-weight-bold">íšŒì› ì´ë¦„</label>
                <input type="text" name="name" class="form-control" placeholder="ì´ë¦„ ì…ë ¥" th:value="${param.name}">
            </div>
            <div class="col-md-3">
                <label class="small font-weight-bold">ì´í›„ ë‚ ì§œ ê²€ìƒ‰</label>
                <input type="date" name="date" class="form-control" th:value="${param.date}">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary px-4">ì¡°íšŒí•˜ê¸°</button>
                <a href="/dues" class="btn btn-light border px-3">ì´ˆê¸°í™”</a>
            </div>
        </form>
    </div>

    <div class="btn-header d-flex justify-content-end mb-3">
        <a href="/dues/unpaid" class="btn btn-outline-info">ğŸ” ë¯¸ë‚©ì ëª…ë‹¨ ì¡°íšŒ</a>
    </div>

    <div class="table-box">
        <table class="table table-hover" th:if="${!isResultEmpty}">
            <thead class="thead-light">
            <tr>
                <th style="width: 12%">ì´ë¦„</th>
                <th style="width: 18%" th:if="${session.loginMember == 'ADMIN'}">í•™ë²ˆ</th>
                <th style="width: 18%">ë‚©ë¶€ ê¸ˆì•¡</th>
                <th style="width: 12%">í•™ê¸°</th>
                <th style="width: 15%">ë‚©ë¶€ ë‚ ì§œ</th>
                <th style="width: 15%">ë¹„ê³ </th>
                <th style="width: 15%" th:if="${session.loginMember == 'ADMIN'}">ê´€ë¦¬</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dues : ${duesList}">
                <td th:text="${dues.member.name}" class="font-weight-bold">ì´ë¦„</td>
                <td th:text="${dues.member.studentId}" th:if="${session.loginMember == 'ADMIN'}">í•™ë²ˆ</td>
                <td th:text="${#numbers.formatInteger(dues.amount, 0, 'COMMA')} + 'ì›'" class="text-primary font-weight-bold">ê¸ˆì•¡</td>
                <td th:text="${dues.semester}">í•™ê¸°</td>
                <td th:text="${dues.paymentDate}">ë‚ ì§œ</td>
                <td th:text="${dues.note}" class="text-muted">ë¹„ê³ </td>
                <td th:if="${session.loginMember == 'ADMIN'}">
                    <div class="btn-group btn-group-sm">
                        <a th:href="@{/dues/{id}/edit(id=${dues.id})}" class="btn btn-outline-primary">ìˆ˜ì •</a>
                        <form th:action="@{/dues/{id}/delete(id=${dues.id})}" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ì‚­ì œ</button>
                        </form>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div th:if="${isResultEmpty}" class="text-center py-5">
            <div class="mb-3" style="font-size: 40px;">ğŸ”</div>
            <h4 class="text-muted">ë‚©ë¶€ ë‚´ì—­ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h4>
            <p class="text-secondary small">ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ë‚´ì—­ì„ ë“±ë¡í•´ ì£¼ì„¸ìš”.</p>
        </div>
    </div>

    <div class="text-center mt-4 mb-5">
        <a href="/" class="btn btn-secondary px-4">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        <a href="/dues/new" class="btn btn-success px-4" th:if="${session.loginMember == 'ADMIN'}">íšŒë¹„ ë‚©ë¶€ ë“±ë¡</a>
    </div>
</div>
</body>
</html>