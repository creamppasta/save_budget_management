<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .container { max-width: 1100px; margin-top: 50px; }
        .table-box { background-color: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        th, td { vertical-align: middle !important; text-align: center; }
        .search-area { background-color: #fff; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #dee2e6; }
    </style>
    <title>íšŒë¹„ ì§€ì¶œ ë‚´ì—­</title>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>ğŸ’¸ íšŒë¹„ ì§€ì¶œ ë‚´ì—­</h2>
        <p class="lead text-muted">ì˜ˆì‚° ì§€ì¶œ ë° ì˜ìˆ˜ì¦ ì¦ë¹™ ë‚´ì—­ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
    </div>

    <div class="search-area shadow-sm">
        <form th:action="@{/expenses}" method="get" class="form-row align-items-end justify-content-center">
            <div class="col-md-3">
                <label class="small font-weight-bold">ì§€ì¶œ ë‚´ìš©(ì„¸ë¶€ ì‚¬í•­)</label>
                <input type="text" name="detail" class="form-control" placeholder="ë‚´ìš© ì…ë ¥" th:value="${param.detail}">
            </div>
            <div class="col-md-3">
                <label class="small font-weight-bold">ì´í›„ ë‚ ì§œ ê²€ìƒ‰</label>
                <input type="date" name="date" class="form-control" th:value="${param.date}">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-danger px-4">ì¡°íšŒí•˜ê¸°</button>
                <a href="/expenses" class="btn btn-light border px-3">ì´ˆê¸°í™”</a>
            </div>
        </form>
    </div>

    <div class="table-box">
        <table class="table table-hover" th:if="${!isResultEmpty}">
            <thead class="thead-light">
            <tr>
                <th style="width: 15%">ì§€ì¶œ ë‚ ì§œ</th>
                <th style="width: 15%">ì¹´í…Œê³ ë¦¬</th>
                <th style="width: 15%">ì§€ì¶œ ê¸ˆì•¡</th>
                <th style="width: 25%">ì„¸ë¶€ ì‚¬í•­</th>
                <th style="width: 10%">ì¦ë¹™</th>
                <th style="width: 20%">ê´€ë¦¬</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="expense : ${expenses}">
                <td th:text="${expense.expenseDate}">2024-02-10</td>
                <td th:text="${expense.category}" class="font-weight-bold">ì¹´í…Œê³ ë¦¬</td>
                <td th:text="${#numbers.formatInteger(expense.amount, 0, 'COMMA')} + 'ì›'" class="text-danger font-weight-bold">ê¸ˆì•¡</td>
                <td th:text="${expense.detail}" class="text-center">ì„¸ë¶€ì‚¬í•­</td>
                <td>
                    <a th:if="${expense.receiptUrl != null and expense.receiptUrl != ''}"
                       th:href="${expense.receiptUrl}" target="_blank" class="badge badge-info p-2">ë³´ê¸°</a>
                    <span th:unless="${expense.receiptUrl != null and expense.receiptUrl != ''}" class="text-muted">-</span>
                </td>
                <td>
                    <div class="btn-group btn-group-sm">
                        <a th:href="@{/expenses/{id}/edit(id=${expense.id})}" class="btn btn-outline-primary" th:if="${session.loginMember == 'ADMIN'}">ìˆ˜ì •</a>
                        <form th:action="@{/expenses/{id}/delete(id=${expense.id})}" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');" th:if="${session.loginMember == 'ADMIN'}">ì‚­ì œ</button>
                        </form>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div th:if="${isResultEmpty}" class="text-center py-5">
            <div class="mb-3" style="font-size: 40px;">ğŸ’¸</div>
            <h4 class="text-muted">ì§€ì¶œ ë‚´ì—­ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h4>
            <p class="text-secondary small">ê²€ìƒ‰ì–´ë¥¼ ë°”ê¾¸ê±°ë‚˜ ì „ì²´ ëª©ë¡ì„ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
        </div>
    </div>

    <div class="text-center mt-4 mb-5">
        <a href="/" class="btn btn-secondary px-4">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        <a href="/expenses/new" class="btn btn-danger px-4" th:if="${session.loginMember == 'ADMIN'}">ì§€ì¶œ ë‚´ì—­ ë“±ë¡</a>
    </div>
</div>
</body>
</html>